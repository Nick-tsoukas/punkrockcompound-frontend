if (self.CavalryLogger) { CavalryLogger.start_js(["Vy02v8c"]); }

__d("CometFeedStoryOptimisticMediaAttachmentSection_story.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CometFeedStoryOptimisticMediaAttachmentSection_story",selections:[{kind:"ClientExtension",selections:[{alias:null,args:null,concreteType:"OptimisticMediaAttachmentData",kind:"LinkedField",name:"optimistic_media_attachments",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"entID",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"objectURL",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"type",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"useCDNPreview",storageKey:null}],storageKey:null}]}],type:"Story",abstractKey:null};e.exports=a}),null);
__d("CometFeedStoryOptimisticMediaAttachmentSection.react",["CometFeedStoryOptimisticMediaAttachmentSection_story.graphql","CometRelay","deferredLoadComponent","react","requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";var h,i=d("react");e=d("react");var j=e.useEffect,k=e.useRef,l=e.useState,m=c("deferredLoadComponent")(c("requireDeferred")("CometFeedStoryOptimisticProgressBar.react").__setRef("CometFeedStoryOptimisticMediaAttachmentSection.react")),n=c("deferredLoadComponent")(c("requireDeferred")("ComposerCometMediaAttachmentCollage.react").__setRef("CometFeedStoryOptimisticMediaAttachmentSection.react"));function a(a){var b=k(),c=l(0),d=c[0],e=c[1];j(function(){b.current&&e(b.current.offsetWidth)},[]);a=(c=a.story)==null?void 0:c.optimistic_media_attachments;if(a==null)return null;c=a.filter(function(a){return a!=null}).map(function(a){return{entID:(a==null?void 0:a.entID)||void 0,fileName:null,fileObjectURL:(a==null?void 0:a.objectURL)||"",fileType:(a==null?void 0:a.type)||"UNKNOWN",state:"OPTIMISTIC_UPLOADED",uploadID:null,useCDNPreview:(a==null?void 0:a.useCDNPreview)||void 0}});return i.jsxs("div",{ref:b,children:[i.jsx(m,{}),d>0&&i.jsx(n,{mediaAttachments:c,mediaUploadLoggingMetadata:{composerEntrypoint:"feed",source:"optimistic_post"},width:d,withoutUploader:!0})]})}a.displayName=a.name+" [from "+f.id+"]";e=d("CometRelay").createSuspenseFragmentContainer_DEPRECATED(a,{story:h!==void 0?h:h=b("CometFeedStoryOptimisticMediaAttachmentSection_story.graphql")});g["default"]=e}),98);